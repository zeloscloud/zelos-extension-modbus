{
  "$comment": "Modbus extension configuration schema. See https://docs.zeloscloud.io/sdk/how-to/develop-extensions/#configuration",
  "type": "object",
  "title": "Modbus Configuration",
  "description": "Configure your Modbus TCP connection and register polling",
  "properties": {
    "demo": {
      "type": "boolean",
      "title": "Demo Mode",
      "description": "Use built-in power meter simulator (no hardware required)",
      "default": false
    },
    "host": {
      "type": "string",
      "title": "Host",
      "description": "Modbus TCP host address",
      "default": "127.0.0.1"
    },
    "port": {
      "type": "integer",
      "title": "Port",
      "description": "Modbus TCP port",
      "default": 502,
      "minimum": 1,
      "maximum": 65535
    },
    "unit_id": {
      "type": "integer",
      "title": "Unit ID",
      "description": "Modbus slave/unit ID",
      "default": 1,
      "minimum": 0,
      "maximum": 255
    },
    "register_map_file": {
      "type": "string",
      "title": "Register Map File",
      "description": "Path to JSON register map file (optional)",
      "ui:widget": "file-picker",
      "ui:options": {
        "accept": ".json"
      }
    },
    "poll_interval": {
      "type": "number",
      "title": "Poll Interval (seconds)",
      "description": "How often to poll registers",
      "default": 1.0,
      "minimum": 0.1,
      "maximum": 60.0
    },
    "timeout": {
      "type": "number",
      "title": "Timeout (seconds)",
      "description": "Modbus request timeout",
      "default": 3.0,
      "minimum": 0.5,
      "maximum": 30.0
    },
    "log_level": {
      "type": "string",
      "title": "Log Level",
      "description": "Logging verbosity",
      "enum": ["DEBUG", "INFO", "WARNING", "ERROR"],
      "default": "INFO"
    }
  },
  "required": ["host", "port", "unit_id"]
}
